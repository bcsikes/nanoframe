<head>
  <title>NanoFrame</title>
  <%= render "layouts/scripts"%>
  <%= stylesheet_link_tag 'application', media: 'all' %>
</head>

<body>



  <%= render partial: "layouts/nav", locals: {tab: "bot"}%>

  <div class="message-container">
    <% flash.each do |key, value| %>
    <div class="alert alert-<%= key %> alert-dismissible fade show" role="alert">
      <span class="mesage-value"><%= value %></span>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <% end %>
    <div class="alert alert-warning alert-dismissible fade show warning-container" role="alert">
      <p class="warning-text">The Loopout length is over 200 base pairs </p><a href="#"
        id="continue_anchor">Continue?</a> See <a href="nanobot/generator">generator page</a>
      for iteractive examples.
    </div>
    <div class="alert alert-danger alert-dismissible fade show danger-container" role="alert">
      Specified dimensions are greater than scaffold length!
    </div>
  </div>


  <!-- End of NAVBAR-->

  <!-- Start of Synthesizer Selection-->
  <div class="row selection-menu">
    <div class="col-md-6 synthesizer-container">
      <div class="datGUI"></div>
      <div id="canvas-container">
        <canvas id="synthesizer"></canvas>
      </div>
    </div>
    <div class="col-md-6">
      <div class="synthesizer-header">
        <h3>Select Synthesizing Options</h3>
      </div>
      <%= form_with(model: @generator, method: :post, id: "synthesize-form", class: "synthesize-form") do |f| %>
      <div class="form-container">
        <div class="shape-dropdown">
          <div class="form-floating">
            <%= f.select :shape_id, @shapes, {}, {class: "form-select"} %>
            <%= f.label "Shape", for: "generator_shape_id" %>
          </div>
          <div class="form-floating">
            <%= f.select :scaffold_id, @scaffolds, {}, {class: "form-select"} %>
            <%= f.label "Scaffold", for: "generator_scaffold_id" %>
          </div>
          <%# <%= select_tag(:shape,  options_for_select(@options, :select => "2", :disabled => "0"), id: "synthesizer-shape", class: "form-select")%>
        </div>
      <div class="custom-scaffold-container">
        <div class="form-floating mb-3">
          <input type="text" class="form-control" id="custom_sequence_length" placeholder="scaffold length">
          <label for="custom_sequence_length">Length</label>
        </div>
      </div>
        <%# Erbify %>
        <div class="row sequence-container">
          <div class="col-md-5 random-sequence-container">
            <input class="form-check-input" type="checkbox" value="" id="sequence_checkbox" checked autocomplete="off">
            <label id="sequence_checkbox_label" class="form-check-label" for="sequence_checkbox">
              Random Sequence
            </label>
          </div>

          <div class="col-md-7 input-container">
            <input class="form-control form-control-sm" id="sequenceUpload" type="file" accept=".txt">
          </div>
        </div>
        <%= f.hidden_field "scaffold_length" ""%>
        <%# Add hidden field for JSON data %>
        <% if @current_user %>
        <div class="visibility-container">
          <div class="form-check form-switch">
            <%= f.check_box :visibility, class: "form-check-input", id: "visibility-input", checked: true%>
            <label class="form-check-label" id="visibility-label" for="visibility-input">Public</label>
          </div>
        </div>
        <% end %>
        <div class="dimension-picker">
          <div
            class="width-container dimension-wrapper-container <%= 'dimension-container' if @generator.width == nil %>">
            <div class="input-group dimension-input-container">
              <span class="input-group-text w-25">Width</span>
              <%= f.text_field :width, type: "text", class: "dimension-input width-input form-control", placeholder: "30 nm" %>
            </div>
          </div>

          <div
            class="height-container dimension-wrapper-container <%= 'dimension-container' if @generator.height == nil %>">
            <div class="input-group dimension-input-container">
              <span class="input-group-text w-25">Height</span>
              <%= f.text_field :height, type: "text", class: "dimension-input height-input form-control", placeholder: "30 nm" %>
            </div>
          </div>

          <div
            class="depth-container dimension-wrapper-container <%= 'dimension-container' if @generator.depth == nil %>">
            <div class="input-group dimension-input-container">
              <span class="input-group-text w-25">Depth</span>
              <%= f.text_field :depth, type: "text", class: "dimension-input depth-input form-control", placeholder: "30 nm" %>
            </div>
          </div>

          <div
            class="ws-container dimension-wrapper-container <%= 'dimension-container' if @generator.width_segment == nil %>">
            <div class="input-group dimension-input-container">
              <span class="input-group-text w-25">Stripes</span>
              <%= f.text_field :segments, type: "text", class: "dimension-input ws-input form-control", placeholder: "3" %>
            </div>
          </div>

          <div class="json-container">
            <%= f.text_field :json, type: "hidden", class: "json-input" %>
          </div>
        </div>
        <div class="synthesizer-btn-container">
          <%= f.submit "Synthesize", id: "synthesize-btn", class: "synthesizer-btn btn btn-outline-dark btn-lg w-100", disabled: true%>
          <%# <button type="submit" class="synthesizer-btn btn btn-secondary btn-lg w-50" disabled>Synthesize</button> %>
        </div>
      </div>
      <% end %>
    </div>

  </div>

  <!-- End of Synthesizer Selection-->

  <%= render "layouts/footer"%>
  <%= javascript_pack_tag 'dna', 'nanobot', 'data-turbolinks-track': 'reload'%>
</body>